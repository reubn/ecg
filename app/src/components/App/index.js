import React, {Suspense, useEffect, useState} from 'react'

import {ecgLink} from '../../ECGLink'

import Graph from '../Graph'
import Report from '../Report'

import {app} from './style'

const temp1 = `1804025693,1.71123046875
1804028912,1.7176757812499999
1804032014,1.7208984374999998
1804035417,1.72412109375
1804037588,1.7208984374999998
1804040369,1.72412109375
1804043441,1.7208984374999998
1804046757,1.72412109375
1804048955,1.73056640625
1804051749,1.72734375
1804055020,1.73056640625
1804058433,1.72734375
1804060631,1.72412109375
1804063270,1.73056640625
1804066421,1.73056640625
1804068619,1.740234375
1804070554,1.7337890624999999
1804073485,1.73056640625
1804076505,1.73056640625
1804079878,1.72734375
1804082102,1.73056640625
1804084889,1.7337890624999999
1804087916,1.7337890624999999
1804089913,1.73056640625
1804093333,1.7337890624999999
1804095580,1.72734375
1804098354,1.72412109375
1804101733,1.7208984374999998
1804103853,1.714453125
1804106928,1.7337890624999999
1804110391,1.7337890624999999
1804112584,1.7337890624999999
1804114368,1.7337890624999999
1804117060,1.72734375
1804120603,1.72412109375
1804122806,1.72412109375
1804125533,1.72734375
1804128618,1.73056640625
1804132025,1.72734375
1804134243,1.72412109375
1804137016,1.72412109375
1804140037,1.714453125
1804143068,1.71123046875
1804146121,1.714453125
1804149150,1.714453125
1804152560,1.714453125
1804154905,1.714453125
1804157729,1.714453125
1804160779,1.7176757812499999
1804163826,1.7176757812499999
1804165877,1.7176757812499999
1804169001,1.7208984374999998
1804171190,1.714453125
1804173981,1.7176757812499999
1804177025,1.71123046875
1804180108,1.71123046875
1804183178,1.71123046875
1804186227,1.7176757812499999
1804189257,1.7176757812499999
1804191262,1.714453125
1804193947,1.7176757812499999
1804197508,1.7176757812499999
1804199692,1.7176757812499999
1804202475,1.71123046875
1804205573,1.7176757812499999
1804208044,1.7176757812499999
1804210984,1.7176757812499999
1804214558,1.7208984374999998
1804216615,1.714453125
1804218404,1.714453125
1804221675,1.71123046875
1804223889,1.714453125
1804226644,1.7176757812499999
1804229741,1.7208984374999998
1804232814,1.72734375
1804235937,1.72412109375
1804238979,1.7208984374999998
1804242014,1.72412109375
1804245060,1.72412109375
1804248114,1.7208984374999998
1804251145,1.714453125
1804254321,1.7208984374999998
1804257408,1.7208984374999998
1804260410,1.714453125
1804263457,1.7176757812499999
1804266496,1.72412109375
1804268551,1.72734375
1804271687,1.73056640625
1804273885,1.72734375
1804276634,1.72412109375
1804279713,1.714453125
1804282802,1.7208984374999998
1804285853,1.7176757812499999
1804288908,1.72734375
1804291895,1.72734375
1804293950,1.7176757812499999
1804296809,1.7176757812499999
1804300164,1.7176757812499999
1804302369,1.7208984374999998
1804305244,1.7208984374999998
1804308228,1.7208984374999998
1804310282,1.714453125
1804312439,1.72412109375
1804315985,1.7176757812499999
1804318194,1.714453125
1804319963,1.7080078125
1804322807,1.7176757812499999
1804325853,1.7208984374999998
1804328886,1.72412109375
1804331982,1.72412109375
1804335012,1.72734375
1804338087,1.72734375
1804341128,1.72734375
1804344178,1.72412109375
1804347532,1.72412109375
1804349754,1.7208984374999998
1804352504,1.7176757812499999
1804356046,1.72412109375
1804358285,1.7176757812499999
1804360207,1.7176757812499999
1804363409,1.7176757812499999
1804365620,1.72412109375
1804368381,1.72734375
1804371256,1.72734375
1804374617,1.7208984374999998
1804376834,1.72734375
1804379950,1.73056640625
1804382208,1.740234375
1804384984,1.740234375
1804387989,1.7337890624999999
1804391017,1.73056640625
1804394080,1.7337890624999999
1804396971,1.7337890624999999
1804400289,1.740234375
1804402481,1.74345703125
1804405351,1.7531249999999998
1804408461,1.75634765625
1804411408,1.75634765625
1804413457,1.7466796875
1804415303,1.7531249999999998
1804418524,1.7531249999999998
1804421625,1.7531249999999998
1804423763,1.7531249999999998
1804426998,1.7595703125
1804429226,1.7692382812499998
1804432060,1.7853515624999998
1804435436,1.78857421875
1804437640,1.7982421874999999
1804440738,1.80791015625
1804442945,1.80791015625
1804446053,1.8111328125
1804448258,1.7982421874999999
1804451363,1.77890625
1804453568,1.7660156249999999
1804456969,1.75634765625
1804459229,1.7466796875
1804461993,1.7337890624999999
1804465053,1.7337890624999999
1804468402,1.73056640625
1804470610,1.72734375
1804473243,1.7208984374999998
1804476287,1.7208984374999998
1804479328,1.7176757812499999
1804482395,1.714453125
1804485424,1.7176757812499999
1804488452,1.72734375
1804491762,1.7208984374999998
1804493963,1.7176757812499999
1804496748,1.7208984374999998
1804499663,1.7208984374999998
1804502622,1.7208984374999998
1804506163,1.72412109375
1804508402,1.72412109375
1804511180,1.7208984374999998
1804514098,1.7176757812499999
1804516109,1.7080078125
1804519092,1.73056640625
1804522281,1.7595703125
1804526108,1.8014648437499998
1804529512,1.85625
1804532947,1.9271484374999999
1804535165,1.9916015624999999
1804537911,2.09150390625
1804540970,2.18818359375
1804544330,2.2751953124999997
1804546551,2.31064453125
1804549633,2.3267578125
1804551865,2.2494140625
1804555105,2.09150390625
1804557367,1.95615234375
1804560127,1.75634765625
1804563140,1.5017578125
1804566164,1.276171875
1804569175,1.13115234375
1804572198,1.08603515625
1804575106,1.1214843749999999
1804577279,1.173046875
1804580207,1.26328125
1804583257,1.3631835937499999
1804586295,1.4598632812499999
1804589324,1.546875
1804592375,1.611328125
1804595405,1.6532226562499999
1804598459,1.6854492187499999
1804601338,1.714453125
1804604659,1.740234375
1804606972,1.7531249999999998
1804609801,1.7531249999999998
1804612805,1.7466796875
1804615700,1.7466796875
1804617773,1.7337890624999999
1804619500,1.7466796875
1804621178,1.7466796875
1804624339,1.75634765625
1804627283,1.75634765625
1804630970,1.76279296875
1804633188,1.76279296875
1804635948,1.7660156249999999
1804638995,1.7692382812499998
1804642010,1.77890625
1804645359,1.7821289062499999
1804647584,1.7821289062499999
1804650293,1.7853515624999998
1804653371,1.7821289062499999
1804656444,1.78857421875
1804659521,1.79501953125
1804662872,1.8014648437499998
1804665097,1.8046875
1804667855,1.8046875
1804671237,1.80791015625
1804673444,1.80791015625
1804676202,1.8046875
1804678274,1.8046875
1804681350,1.8111328125
1804683550,1.8111328125
1804686296,1.8175781249999998
1804689307,1.82080078125
1804692645,1.8240234375
1804694849,1.82080078125
1804697628,1.8240234375
1804700660,1.8304687499999999
1804703568,1.8369140625
1804707029,1.8336914062499998
1804709297,1.8465820312499999
1804712379,1.8465820312499999
1804714612,1.8465820312499999
1804717242,1.85625
1804719311,1.8498046874999998
1804721023,1.85947265625
1804722713,1.869140625
1804726256,1.87236328125
1804728439,1.8820312499999998
1804731660,1.88525390625
1804735069,1.8820312499999998
1804737278,1.8981445312499998
1804740061,1.9013671875
1804743066,1.91748046875
1804746097,1.91748046875
1804749135,1.9271484374999999
1804752171,1.92392578125
1804755683,1.93359375
1804757928,1.9271484374999999
1804760687,1.9271484374999999
1804763705,1.920703125
1804767035,1.920703125
1804769253,1.91748046875
1804772037,1.920703125
1804775084,1.920703125
1804778101,1.9142578124999998
1804780213,1.9013671875
1804783327,1.9013671875
1804785515,1.9013671875
1804788235,1.8884765625
1804791288,1.8755859375
1804794306,1.8659179687499998
1804797358,1.8498046874999998
1804800380,1.8369140625
1804803431,1.82724609375
1804806341,1.8175781249999998
1804809428,1.8046875
1804812491,1.78857421875
1804815534,1.77890625
1804818572,1.76279296875
1804821487,1.75634765625
1804823533,1.7466796875
1804825435,1.7499023437499999
1804828702,1.740234375
1804830787,1.73056640625
1804832481,1.73056640625
1804835578,1.72412109375
1804838802,1.7176757812499999
1804841875,1.7080078125
1804844911,1.7080078125
1804847982,1.7047851562499998
1804850985,1.7080078125
1804854051,1.7015624999999999
1804857234,1.6951171875
1804860324,1.69189453125
1804863376,1.69189453125
1804866431,1.6886718749999998
1804869465,1.6886718749999998
1804872536,1.6886718749999998
1804875887,1.6886718749999998
1804878137,1.6886718749999998
1804880954,1.69189453125
1804883046,1.6951171875
1804886228,1.6951171875
1804888281,1.6951171875
1804891275,1.6951171875
1804893483,1.6886718749999998
1804896279,1.6886718749999998
1804899335,1.69189453125
1804902380,1.7015624999999999
1804905443,1.7015624999999999
1804908353,1.7015624999999999
1804911507,1.7015624999999999
1804914583,1.7047851562499998
1804917970,1.7015624999999999
1804920157,1.7015624999999999
1804922827,1.7080078125
1804924893,1.7015624999999999
1804926620,1.7080078125
1804928307,1.7080078125
1804930047,1.71123046875
1804931958,1.714453125
1804933827,1.7176757812499999
1804937911,1.714453125
1804941382,1.71123046875
1804943586,1.71123046875
1804946383,1.7176757812499999
1804949637,1.714453125
1804952931,1.7208984374999998
1804955316,1.7208984374999998
1804958190,1.714453125
1804961224,1.71123046875
1804964617,1.714453125
1804966824,1.7208984374999998
1804969604,1.72412109375
1804972657,1.72734375
1804975747,1.7208984374999998
1804978792,1.714453125
1804982061,1.7176757812499999
1804985050,1.7208984374999998
1804988039,1.7176757812499999
1804990128,1.71123046875
1804992957,1.7208984374999998
1804996316,1.714453125
1804998392,1.714453125
1805000220,1.714453125
1805003409,1.714453125
1805005651,1.7176757812499999
1805007493,1.7047851562499998
1805010364,1.6951171875
1805013892,1.7080078125
1805016071,1.7080078125
1805018857,1.7047851562499998
1805021854,1.71123046875
1805024787,1.7080078125
1805026830,1.7080078125
1805028696,1.7176757812499999
1805032211,1.7176757812499999
1805034429,1.71123046875
1805036225,1.71123046875
1805038929,1.7047851562499998
1805042171,1.7047851562499998
1805045232,1.7080078125
1805048268,1.71123046875
1805051685,1.71123046875
1805053872,1.71123046875
1805057184,1.71123046875
1805059319,1.6951171875
1805061431,1.7080078125
1805064679,1.7080078125
1805066891,1.7080078125
1805069656,1.7080078125
1805072672,1.7015624999999999
1805075717,1.7015624999999999
1805078743,1.7047851562499998
1805081822,1.7015624999999999
1805084914,1.7015624999999999
1805087813,1.7080078125
1805091078,1.6951171875
1805094137,1.7047851562499998
1805097174,1.7080078125
1805100226,1.7080078125
1805103275,1.7080078125
1805106370,1.714453125
1805109434,1.714453125
1805112441,1.714453125
1805115869,1.7080078125
1805118104,1.71123046875
1805120881,1.71123046875
1805123877,1.7015624999999999
1805126832,1.7080078125
1805128889,1.6951171875
1805130631,1.7015624999999999
1805132549,1.7080078125
1805136228,1.7080078125
1805138312,1.7080078125
1805140200,1.7176757812499999
1805143432,1.71123046875
1805145663,1.714453125
1805148437,1.7208984374999998
1805151502,1.7208984374999998
1805155006,1.714453125
1805157279,1.7080078125
1805160056,1.7080078125
1805163141,1.7080078125
1805166193,1.7080078125
1805169204,1.7080078125
1805172251,1.71123046875
1805175344,1.7080078125
1805178351,1.7080078125
1805181449,1.7176757812499999
1805184514,1.714453125
1805187570,1.72412109375
1805189637,1.714453125
1805192328,1.714453125
1805195863,1.7176757812499999
1805198095,1.71123046875
1805200868,1.71123046875
1805203920,1.714453125
1805207012,1.7208984374999998
1805210098,1.7176757812499999
1805213468,1.714453125
1805215614,1.71123046875
1805218681,1.714453125
1805220917,1.7176757812499999
1805223712,1.72412109375
1805226767,1.72734375
1805229718,1.7208984374999998
1805231843,1.71123046875
1805235213,1.7208984374999998
1805238214,1.7176757812499999
1805241091,1.7176757812499999
1805243248,1.72412109375
1805246415,1.73056640625
1805248646,1.72412109375
1805251754,1.7208984374999998
1805253987,1.7176757812499999
1805257230,1.72412109375
1805259506,1.7208984374999998
1805262303,1.7208984374999998
1805265349,1.73056640625
1805268372,1.73056640625
1805271421,1.72734375
1805274444,1.7208984374999998
1805277452,1.72412109375
1805280831,1.73056640625
1805283089,1.73056640625
1805285875,1.73056640625
1805288934,1.7337890624999999
1805291771,1.72412109375
1805293954,1.72412109375
1805297171,1.72412109375
1805299399,1.72412109375
1805302129,1.72412109375
1805305225,1.7337890624999999
1805308270,1.7466796875
1805311316,1.7499023437499999
1805314338,1.7466796875
1805317331,1.7499023437499999
1805319498,1.7499023437499999
1805322747,1.7595703125
1805324974,1.7595703125
1805327772,1.7660156249999999
1805330860,1.76279296875
1805333818,1.7595703125
1805335871,1.76279296875
1805337588,1.7692382812499998
1805340429,1.7853515624999998
1805343473,1.7982421874999999
1805346985,1.8014648437499998
1805349206,1.80791015625
1805351983,1.791796875
1805355532,1.7724609375
1805357780,1.75634765625
1805360577,1.7531249999999998
1805363603,1.7531249999999998
1805365684,1.740234375
1805369175,1.740234375
1805371468,1.740234375
1805374228,1.72734375
1805377215,1.7208984374999998
1805380612,1.7176757812499999
1805382884,1.7080078125
1805385931,1.71123046875
1805388177,1.714453125
1805390939,1.7208984374999998
1805393964,1.714453125
1805396858,1.714453125
1805399778,1.714453125
1805402768,1.7176757812499999
1805405842,1.72734375
1805408869,1.72734375
1805412264,1.72412109375
1805414494,1.7208984374999998
1805417330,1.71123046875
1805419465,1.7015624999999999
1805421152,1.71123046875`.split('\n').map(line => line.split(',').map((x, i) => i ? ((((+x / 3.3) * 2**10) / 2**10) * 3.453) / 1100 : +x - 1804025693))

temp1.map(s => s.map((x, i) => i ? x : x + 1395459)).forEach(s => temp1.push(s))
temp1.map(s => s.map((x, i) => i ? x : x + (1395459 * 2))).forEach(s => temp1.push(s))
temp1.map(s => s.map((x, i) => i ? x : x + (1395459 * 3))).forEach(s => temp1.push(s))
temp1.map(s => s.map((x, i) => i ? x : x + (1395459 * 4))).forEach(s => temp1.push(s))
// temp1.map(s => s.map((x, i) => i ? x : x + (1395459 * 5))).forEach(s => temp1.push(s))
// temp1.map(s => s.map((x, i) => i ? x : x + (1395459 * 6))).forEach(s => temp1.push(s))
// temp1.map(s => s.map((x, i) => i ? x : x + (1395459 * 7))).forEach(s => temp1.push(s))
// temp1.map(s => s.map((x, i) => i ? x : x + (1395459 * 8))).forEach(s => temp1.push(s))
// temp1.map(s => s.map((x, i) => i ? x : x + (1395459 * 9))).forEach(s => temp1.push(s))
console.log(temp1)
export default () => {
  useEffect(() => () => ecgLink.close(), [])

  const [test, setTest] = useState(true)
  const [recording, setRecording] = useState(temp1)

  window.setTest = setTest.bind(null, true)
  window.setRecording = setRecording
  const content = (
    <>
      {test ? <Report recording={recording} /> : <Graph ecgLink={ecgLink} />}
    </>
  )

  return (
    <section className={app}>
      <Suspense fallback={<></>}>
        {content}
      </Suspense>
    </section>
  )
}
